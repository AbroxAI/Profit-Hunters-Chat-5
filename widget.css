/* widget.css
   Profit Hunters â€” Chat widget styles
   - Light / dark themes via [data-theme] on <html>
   - Sticky pin banner, telegram-like bubbles, rounded avatars
   - Typing preview, join sticker, jump indicator, context menu, reaction pills
*/

/* ---------------------------
   Theme variables (light)
   --------------------------- */
:root {
  --bg: #f7f9fb;
  --surface: #ffffff;
  --muted: #9aa4b2;
  --text: #0f1720;
  --accent: #2a8df6;           /* telegram blue */
  --accent-600: #1f6fe0;
  --danger: #e63946;
  --success: #16a34a;
  --glass: rgba(255,255,255,0.6);
  --shadow-sm: 0 6px 18px rgba(15,20,30,0.06);
  --shadow-md: 0 10px 30px rgba(15,20,30,0.08);
  --bubble-incoming: #ffffff;
  --bubble-outgoing: linear-gradient(135deg,#2a8df6,#1f6fe0);
  --bubble-incoming-text: #0f1720;
  --bubble-outgoing-text: #fff;
  --pin-bg: #fffbe6;
  --pin-border: rgba(42,141,246,0.12);
  --avatar-size: 44px;
  --avatar-radius: 12px;
  --bubble-radius: 14px;
  --bubble-tail-size: 8px;
  --meta-font-size: 13px;
  --ui-radius: 10px;
  --input-height: 44px;
}

/* ---------------------------
   Dark theme overrides
   --------------------------- */
:root[data-theme="dark"] {
  --bg: #0b1220;
  --surface: #071123;
  --muted: #9aa4b2;
  --text: #e6eef6;
  --accent: #2a8df6;
  --accent-600: #1b6bd6;
  --danger: #ff6b6b;
  --success: #2dd4bf;
  --glass: rgba(255,255,255,0.04);
  --shadow-sm: 0 6px 18px rgba(0,0,0,0.45);
  --shadow-md: 0 10px 30px rgba(0,0,0,0.55);
  --bubble-incoming: #071226;
  --bubble-outgoing: linear-gradient(135deg,#2a8df6,#1b6bd6);
  --bubble-incoming-text: #e6eef6;
  --bubble-outgoing-text: #fff;
  --pin-bg: rgba(42,141,246,0.06);
  --pin-border: rgba(42,141,246,0.18);
  --avatar-radius: 10px;
}

/* ---------------------------
   Global layout
   --------------------------- */
html,body{
  height:100%;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  font-size:14px;
  line-height:1.3;
  margin:0;
}

/* Main shell */
.tg-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:10px 14px;
  background:transparent;
  position:sticky;
  top:0;
  z-index:50;
  backdrop-filter: blur(6px);
}
.tg-header-left{ display:flex; align-items:center; gap:12px; }
.tg-avatar img{
  width:48px; height:48px; border-radius:12px; object-fit:cover; display:block;
  box-shadow: var(--shadow-sm);
  border: 1px solid rgba(0,0,0,0.04);
}
.tg-title{ font-weight:700; font-size:16px; }
.tg-meta-line{ font-size:var(--meta-font-size); color:var(--muted); }

/* header right buttons */
.tg-icon-btn, .tg-ghost-btn{
  background:transparent;
  border:0;
  padding:8px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border-radius:10px;
  color:var(--text);
  cursor:pointer;
}
.tg-icon-btn:hover, .tg-ghost-btn:hover{ background:var(--glass); }

.tg-main{ display:flex; flex-direction:column; height: calc(100vh - 140px); /* header + composer space approx */ }

/* comments wrapper */
.tg-comments-wrapper{
  display:flex; flex-direction:column; height:100%;
  max-height:100%;
}
.tg-comments-container{
  overflow:auto;
  padding:14px;
  padding-bottom:32px;
  flex:1 1 auto;
}

/* Jump indicator */
.tg-jump-indicator{
  position: fixed;
  right: 18px;
  bottom: 88px;
  display:inline-flex;
  gap:8px;
  align-items:center;
  padding:8px 12px;
  border-radius:999px;
  background:var(--accent);
  color:#fff;
  box-shadow:var(--shadow-md);
  border:0;
  cursor:pointer;
  transform:translateY(0);
  transition:transform .18s ease, opacity .18s ease;
}
.tg-jump-indicator.hidden{ opacity:0; pointer-events:none; transform:translateY(12px); }
.tg-jump-indicator .tg-jump-count{ background:rgba(255,255,255,0.12); padding:4px 8px; border-radius:999px; font-weight:700; }

/* message bubbles layout */
.tg-bubble{
  display:flex;
  gap:10px;
  margin:8px 0;
  align-items:flex-end;
  max-width: 92%;
  position:relative;
}
.tg-bubble.incoming{ align-self:flex-start; }
.tg-bubble.outgoing{ align-self:flex-end; justify-content:flex-end; }
.tg-bubble .tg-bubble-avatar img{
  width:var(--avatar-size); height:var(--avatar-size); border-radius:var(--avatar-radius); object-fit:cover;
  box-shadow:var(--shadow-sm);
  flex-shrink:0;
}

/* bubble content */
.tg-bubble-content{
  padding:10px 12px;
  border-radius: var(--bubble-radius);
  background:var(--bubble-incoming);
  color:var(--bubble-incoming-text);
  box-shadow: var(--shadow-sm);
  position:relative;
  font-size:14px;
  word-break:break-word;
}

/* outgoing style */
.tg-bubble.outgoing .tg-bubble-content{
  background: var(--bubble-outgoing);
  color: var(--bubble-outgoing-text);
  border-radius: var(--bubble-radius);
}

/* bubble tail - simple triangle via pseudo-element */
.tg-bubble.incoming .tg-bubble-content::after{
  content: "";
  position:absolute;
  left:-6px;
  top:12px;
  width:0; height:0;
  border-top:8px solid transparent;
  border-bottom:8px solid transparent;
  border-right:8px solid var(--bubble-incoming);
  filter: drop-shadow(0 1px 0 rgba(0,0,0,0.03));
}
.tg-bubble.outgoing .tg-bubble-content::after{
  content: "";
  position:absolute;
  right:-6px;
  top:12px;
  width:0; height:0;
  border-top:8px solid transparent;
  border-bottom:8px solid transparent;
  border-left:8px solid rgba(255,255,255,0.06);
  /* overlay gradient not trivial: keep subtle */
}

/* sender name and meta */
.tg-bubble-sender{
  font-weight:700;
  font-size:13px;
  margin-bottom:6px;
  color:var(--muted);
}
.tg-bubble .tg-bubble-time{ display:block; font-size:11px; color:var(--muted); margin-top:6px; }

/* system message */
.tg-system{
  display:flex; justify-content:center; margin:12px 0; color:var(--muted); font-size:13px;
}

/* date separators */
.tg-date-sep{
  text-align:center; margin:18px 0; color:var(--muted); font-size:13px;
}
.tg-date-sep .dot{
  display:inline-block; margin:0 10px; background:rgba(0,0,0,0.06); width:8px; height:8px; border-radius:50%;
}

/* typing preview (small bubble under composer) */
.tg-typing-preview{
  font-size:13px;
  color:var(--muted);
  margin-top:4px;
}

/* composer/footer */
.tg-composer{
  display:flex; gap:8px; align-items:center; padding:10px;
  border-top:1px solid rgba(0,0,0,0.04);
  background:var(--surface);
  position:sticky;
  bottom:0;
  z-index:60;
}
.tg-input-wrap{ flex:1; display:flex; flex-direction:column; }
.tg-comment-input{
  width:100%;
  min-height:var(--input-height);
  max-height:160px;
  border-radius:12px;
  padding:10px 12px;
  border:1px solid rgba(0,0,0,0.06);
  background:transparent;
  color:var(--text);
  resize:none;
  outline:none;
  font-size:14px;
}
:root[data-theme="dark"] .tg-comment-input{ border-color: rgba(255,255,255,0.04); }

/* send button */
.tg-send-btn{
  background:var(--accent);
  color:white;
  border:0;
  padding:10px 12px;
  border-radius:12px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  box-shadow:var(--shadow-sm);
  cursor:pointer;
}
.tg-send-btn.hidden{ display:none !important; }

/* camera/attach button */
.tg-camera-btn{ color:var(--muted); }

/* pin banner */
.tg-pin-banner{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 12px;
  border-radius:10px;
  margin:8px 12px;
  background:var(--pin-bg);
  border:1px solid var(--pin-border);
  box-shadow: var(--shadow-sm);
}
.tg-pin-banner img{ width:40px; height:40px; border-radius:50%; object-fit:cover; }
.tg-pin-banner .pin-text{ font-weight:700; color:var(--text); }
.tg-pin-banner .contact-admin-btn{
  margin-left:auto;
  background:rgba(0,0,0,0.04);
  border:0;
  padding:8px 10px;
  border-radius:8px;
  display:inline-flex; align-items:center; gap:8px; cursor:pointer;
}

/* glass CTA inside bubble (for broadcast) */
.tg-glass-cta{
  margin-top:8px;
  display:inline-block;
  padding:8px 12px;
  border-radius:999px;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.04);
  color:var(--bubble-outgoing-text);
  cursor:pointer;
}

/* context menu */
.tg-msg-context{
  min-width:180px;
  background:var(--surface);
  color:var(--text);
  border-radius:10px;
  padding:8px;
  box-shadow:var(--shadow-md);
  position:fixed;
  z-index:9999;
}
.tg-msg-context .ctx-item{ padding:8px 10px; cursor:pointer; border-radius:8px; }
.tg-msg-context .ctx-item:hover{ background:var(--glass); }

/* reaction pills */
.tg-reactions{ display:flex; gap:6px; margin-top:6px; }
.reaction-pill{
  background: rgba(0,0,0,0.06);
  color:var(--text);
  padding:6px 8px;
  border-radius:999px;
  font-size:13px;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  gap:6px;
}
.reaction-pill.selected{ transform:translateY(-2px); box-shadow:0 4px 14px rgba(0,0,0,0.12); }

/* join sticker */
.tg-join-sticker-wrapper{
  display:flex; justify-content:center; margin:12px 0;
}
.tg-join-sticker{
  display:flex; gap:10px;
  align-items:center;
  background:var(--surface);
  padding:10px 12px;
  border-radius:12px;
  box-shadow:var(--shadow-sm);
  align-items:center;
}
.tg-join-sticker-avatar{ width:48px; height:48px; border-radius:12px; object-fit:cover; }
.tg-join-sticker-title{ font-weight:700; }
.tg-join-sticker-sub{ color:var(--muted); font-size:13px; }

/* pin modal (desktop) */
.tg-pin-modal{
  position:fixed; right:16px; top:80px; width:300px; max-width:90vw; background:var(--surface); border-radius:12px; box-shadow:var(--shadow-md); padding:12px; z-index:999;
}

/* dev toolbar briefly */
#abrox-dev-toolbar{ position:fixed; right:12px; bottom:12px; z-index:99999; background:rgba(0,0,0,0.6); color:#fff; padding:8px; border-radius:8px; font-size:13px; }

/* responsive tweaks */
@media (max-width:720px){
  .tg-header{ padding:8px; }
  .tg-avatar img{ width:40px; height:40px; }
  .tg-comments-container{ padding:10px; }
  .tg-pin-banner{ margin:6px 8px; padding:8px; }
  :root{ --avatar-size:40px; }
}

/* accessibility focus */
.tg-icon-btn:focus, .contact-admin-btn:focus, .tg-send-btn:focus{ outline:3px solid rgba(42,141,246,0.18); outline-offset:2px; }

/* small transitions */
.tg-bubble-content, .tg-pin-banner, .tg-glass-cta{ transition: all .18s ease; }

/* final safety: ensure hidden utility */
.hidden{ display:none !important; }
